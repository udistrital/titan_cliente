<div class="panel panel-primary panel-body">
    <h2 class="page-header text-center">{{'TITULO_NOVEDADES'| translate}}</h2>



    <div class="row" ng-if="!load">

        <div class="col-md-12">

            <div class="panel panel-default">
                <div class="panel-heading">{{'DETALLE_NOVEDAD'| translate}}</div>
                <div class="panel-body">
                    <div ui-grid="gridOptions_novedades" ui-grid-selection ui-grid-pagination ui-grid-auto-resize
                        class="miGrid">
                        <div class="watermark" ng-show="!novedadRegistro.hayNovedad">{{'ALERTA_NO_NOVEDADES'|
                            translate}}</div>
                    </div>
                    <br>
                    <center>
                        <button class="btn btn-success" ng-click="novedadRegistro.listar_conceptos()"
                            ng-if="persona">{{'AGREGAR_NOVEDAD' | translate}}</button>
                    </center>
                </div>
            </div>
        </div>
        <div class="col-md-4 col-md-offset-4">
            <center>
                <button class="btn btn-success" ng-click='novedadRegistro.ShowForm()' data-toggle="modal"
                    data-target="#modal_adicion_novedad">{{'AGREGAR_NOVEDAD' | translate}}</button>
            </center>
        </div>
    </div>
</div>

<div id="modal_detalle" class="modal fade " role="dialog" style="padding-top:5%">
    <div class="modal-content col-md-offset-4 col-md-5">
        <div class="modal-header">
            <button type="button" class="btn btn-outline btn-danger btn-xs pull-right" data-dismiss="modal"
                ng-click="">&times</button><br>
        </div>
    </div>
</div>

<div id="modal_adicion_novedad" class="modal fade" role="dialog">
    <style>
        .md-datepicker-calendar-pane {
            z-index: 1200
        }
    </style>
    <div class="modal-content col-md-12">
        <div class="modal-header">
            <button type="button" class="btn btn-outline btn-danger btn-xs pull-right"
                data-dismiss="modal">&times</button><br>
        </div>
        <div class="modal-body">
            <div class="row" style="display: flex; justify-content: center;flex-flow:row wrap">
                <div class="col-md-12">
                    <div class="panel panel-default">
                        <div class="panel-heading">{{'SELECCION_PERSONA'| translate}}</div>
                        <div class="panel-body">
                            <div ui-grid="gridOptions_personas" ui-grid-selection ui-grid-pagination ui-grid-auto-resize
                                class="miGrid">
                                <!-- AquÃ­ puedes escribir tu comentario 
                                <div class="watermark" ng-show="!novedadRegistro.preliquidacion_elegida">
                                    {{'ALERTA_ELEGIR_PRELIQ'| translate}}</div>
                                <div class="watermark" ng-show="novedadRegistro.cargando">{{'CARGANDO'| translate}}<i
                                        class="fa fa-spin fa-spinner"></i></div> -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>


            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">{{'TITULO_REG_NOVEDAD'| translate}}</h3>
                </div>
                <div class="panel-body">
                    <div class="row">
                        <div class="col-md-6">
                            <div ui-grid="gridOptions_conceptos" ui-grid-pagination ui-grid-selection
                                ui-grid-auto-resize class="miGrid"></div>
                        </div>
                        <div class="col-md-6">
                            <!-- Para conceptos de Seguridad social -->
                            <div class="row" ng-if="novedadRegistro.mostrar_grid_contratos_ss">
                                <div class="col-md-12">
                                    <div class="panel panel-default">
                                        <div class="panel-heading">{{'CONTRATOS_PARA' | translate}} :
                                            {{preliquidacionPersonas.persona_seleccionada}}</div>
                                        <div class="panel-body">
                                            <div ui-grid="novedadRegistro.informacion_contratos_porcentual"
                                                ui-grid-auto-resize class="grid"></div>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-12">
                                    <form name="formplan" ng-submit="formplan.$valid">
                                        <div class="col-md-12">
                                            <br>
                                            <center><b>{{'NOTA' | translate}}: </b></center>
                                            <br>
                                            {{'EXPLICACION_NOV_SS' | translate}}
                                        </div>
                                        <br>
                                        <div class="form-group">
                                            <br>
                                            <label class="col-md-12 col-form-label"
                                                for="txtFechaInicio">{{'FECHA_INICIO' |
                                                translate}}</label>
                                            <div class="col-md-12">
                                                <md-datepicker ng-model="novedadRegistro.FechaInicio"
                                                    md-placeholder="{{'FECHA_INICIO'| translate}}"></md-datepicker>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-md-12 col-form-label" for="txtFechaFin">{{'FECHA_FIN' |
                                                translate}}</label>
                                            <div class="col-md-12">
                                                <md-datepicker ng-model="novedadRegistro.FechaFin"
                                                    md-placeholder="{{'FECHA_FIN'| translate}}"></md-datepicker>
                                            </div>
                                        </div>
                                        <div class="col-md-12 col-form-label">
                                            <br>
                                            <input type="submit" class="form-control btn btn-success"
                                                value="{{'CONFIRMAR' | translate}}"
                                                ng-click='novedadRegistro.Registrar()'>
                                        </div>

                                    </form>
                                </div>
                            </div>
                            <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
                            <!-- Para conceptos tipo porcentual -->
                            <div class="row" ng-if="novedadRegistro.mostrar_grid_contratos_porcentual">

                                <div class="col-md-12">
                                    <form name="formplan" ng-submit="formplan.$valid">
                                        <div class="col-md-12">
                                            <br>
                                            <center><b>{{'NOTA' | translate}}: </b></center>
                                            <br>
                                            {{'EXPLICACION_NOV_PORCENTUAL' | translate}}
                                            <br>
                                        </div>
                                        <br>
                                        <div class="form-group">
                                            <br>
                                            <center><b><label class="col-md-12 col-form-label"
                                                        for="txtValNovedad">PORCENTAJE A APLICAR </label></b></center>
                                            <br>
                                            <div class="col-md-11">
                                                <center><input type="number" step="0.1"
                                                        ng-model="novedadRegistro.ValorNovedad"
                                                        md-placeholder="{{'VALOR_CONCEPTO'| translate}}" required
                                                        min="0" max="100"> %</center>
                                            </div>
                                            <br>
                                        </div>
                                        <br>
                                        <div class="form-group">
                                            <br>
                                            <center><b><label class="col-md-12 col-form-label"
                                                        for="txtValNovedad">NUMERO DE
                                                        CUOTAS</label></b></center>
                                            <br>
                                            <div class="col-md-11">
                                                <center><input type="number" pattern="[0-9]+(\.[0-9]{0,2})?%?"
                                                        ng-model="novedadRegistro.Cuotas"
                                                        md-placeholder="{{'CUOTAS_NOV'| translate}}" required min="1"
                                                        max="12"> </center>
                                            </div>
                                            <br>
                                        </div>
                                        <div class="col-md-12 col-form-label">
                                            <br>
                                            <input type="submit" class="form-control btn btn-success"
                                                value="{{'CONFIRMAR' | translate}}"
                                                ng-click='novedadRegistro.Registrar()'>
                                        </div>

                                    </form>
                                </div>
                            </div>
                            <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
                            <!-- Para conceptos tipo fijos -->
                            <div class="row" ng-if="novedadRegistro.mostrar_grid_contratos_fijo">

                                <div class="col-md-12">
                                    <div class="col-md-12">
                                        <form name="formplan" ng-submit="formplan.$valid">
                                            <div class="col-md-12">
                                                <br>
                                                <center><b>{{'NOTA' | translate}}: </b></center>
                                                <br>
                                                {{'EXPLICACION_NOV_FIJO' | translate}}

                                            </div>
                                            <br>
                                            <div class="form-group">
                                                <br>
                                                <center><b><label class="col-md-12 col-form-label"
                                                            for="txtValNovedad">VALOR
                                                            CUOTA</label></b></center>
                                                <br>
                                                <div class="col-md-12">
                                                    <center><input type="number" pattern="[0-9]+(\.[0-9]{0,2})?%?"
                                                            ng-model="novedadRegistro.ValorNovedad"
                                                            md-placeholder="{{'VALOR_CONCEPTO'| translate}}" required
                                                            min="0"> </center>
                                                </div>
                                                <br>
                                            </div>
                                            <br>
                                            <div class="form-group">
                                                <br>
                                                <center><b><label class="col-md-12 col-form-label"
                                                            for="txtValNovedad">NUMERO DE
                                                            CUOTAS</label></b></center>
                                                <br>
                                                <div class="col-md-11">
                                                    <center><input type="number" pattern="[0-9]+(\.[0-9]{0,2})?%?"
                                                            ng-model="novedadRegistro.Cuotas"
                                                            md-placeholder="{{'CUOTAS_NOV'| translate}}" required
                                                            min="1" max="12"> </center>
                                                </div>
                                                <br>
                                            </div>
                                            <div class="col-md-12 col-form-label">
                                                <br>
                                                <input type="submit" class="form-control btn btn-success"
                                                    value="{{'CONFIRMAR' | translate}}"
                                                    ng-click='novedadRegistro.Registrar()'>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="modal_edicion_novedad" class="modal fade" role="dialog">
        <style>
            .md-datepicker-calendar-pane {
                z-index: 1200
            }
        </style>

        <div class="modal-content col-md-5 col-md-offset-4" style="margin-top: 5%">
            <div class="modal-header">
                <button type="button" class="btn btn-outline btn-danger btn-xs pull-right"
                    data-dismiss="modal">&times</button><br>
            </div>
            <div class="modal-body">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title">{{'TITULO_EDICION_NOVEDAD' | translate}}</h3>
                    </div>
                    <div class="panel-body">
                        <form name="formplan" ng-submit="formplan.$valid">

                            <div ng-show="novedadRegistro.tipo_concepto_edicion ==='porcentual'">
                                <div class="form-group">
                                    <label class="col-md-1 col-form-label col-sm-offset-3"
                                        for="txtValNovedad">{{'VALOR_CONCEPTO' | translate}}</label>
                                    <div class="col-md-1">
                                        <input type="number" pattern="[0-9]+(\.[0-9]{0,2})?%?"
                                            ng-model="novedadRegistro.valor_novedad_edicion"
                                            md-placeholder="{{'VALOR_CONCEPTO' | translate}}" required min="0"
                                            max="100">
                                    </div>
                                    <div class="col-md-1 col-sm-offset-3">
                                        %
                                    </div>
                                </div>

                                <div class="col-md-4 col-form-label col-sm-offset-4">
                                    <br>
                                    <input type="submit" class="form-control btn btn-success"
                                        value="{{'CONFIRMAR' | translate}}" ng-click='novedadRegistro.Editar()'>

                                </div>

                            </div>
                        </form>

                        <form name="formplan" ng-submit="formplan.$valid">
                            <div ng-show="novedadRegistro.tipo_concepto_edicion ==='fijo'">
                                <div class="form-group">
                                    <label class="col-sm-5 col-form-label" for="txtValNovedad">{{'VALOR_CONCEPTO' |
                                        translate}}</label>
                                    <div class="col-md-4">
                                        <input type="number" pattern="[0-9]*"
                                            ng-model="novedadRegistro.valor_novedad_edicion"
                                            md-placeholder="{{'VALOR_CONCEPTO' | translate}}" required="">
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="col-sm-5 col-form-label" for="txtCuotas">{{'CUOTAS_NOV' |
                                        translate}}</label>
                                    <div class="col-md-4">
                                        <input type="number" pattern="[0-9]*"
                                            ng-model="novedadRegistro.num_cuotas_edicion"
                                            md-placeholder="{{'CUOTAS_NOV' | translate}}" required="">
                                    </div>
                                </div>

                                <div class="col-md-4 col-form-label col-sm-offset-4">
                                    <br>
                                    <input type="submit" class="form-control btn btn-success"
                                        value="{{'CONFIRMAR' | translate}}" ng-click='novedadRegistro.Editar()'>

                                </div>

                            </div>
                        </form>

                        <form name="formplan" ng-submit="formplan.$valid">
                            <div ng-show="novedadRegistro.tipo_concepto_edicion ==='seguridad_social'">
                                <div class="form-group">
                                    <label class="col-sm-5 col-form-label" for="txtFechaDesde">{{'FECHA_INICIO' |
                                        translate}}</label>
                                    <div class="col-md-4">
                                        <md-datepicker ng-model="novedadRegistro.FechaInicio"
                                            md-placeholder="{{'FECHA_INICIO'| translate}}"></md-datepicker>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="col-sm-5 col-form-label" for="txtFechaHasta">{{'FECHA_FIN' |
                                        translate}}</label>
                                    <div class="col-md-4">
                                        <md-datepicker ng-model="novedadRegistro.FechaFin"
                                            md-placeholder="{{'FECHA_FIN'| translate}}"></md-datepicker>
                                    </div>
                                </div>

                                <div class="col-md-4 col-form-label col-sm-offset-4">
                                    <input type="submit" class="form-control btn btn-success"
                                        value="{{'CONFIRMAR' | translate}}" ng-click='novedadRegistro.Editar()'>

                                </div>
                            </div>

                        </form>


                    </div>
                </div>
            </div>
        </div>
    </div>